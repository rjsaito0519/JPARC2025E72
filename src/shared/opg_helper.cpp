#include "ana_helper.h"

namespace ana_helper {

    // ____________________________________________________________________________________________
    std::vector<Int_t> get_kvc_info(Int_t run_number) {

        static const std::map<Int_t, std::vector<Int_t>> run_map = {

            // --- group 1 ---
            {3054, {58, 1,1,1,1,1,1,2,1}},
            {3056, {58, 1,1,1,1,1,1,2,1}},
            {3058, {58, 1,1,1,1,1,1,2,1}},
            {3060, {58, 1,1,1,1,1,1,2,1}},
            {3062, {58, 1,1,1,1,1,1,2,1}},

            // --- group 2 ---
            {3066, {58, 2,2,2,2,2,2,2,2}},
            {3068, {58, 2,2,2,2,2,2,2,2}},
            {3069, {58, 2,2,2,2,2,2,2,2}},
            {3070, {58, 2,2,2,2,2,2,2,2}},
            {3071, {58, 2,2,2,2,2,2,2,2}},

            // --- group 3 ---
            {3072, {58, 3,3,3,3,3,3,3,3}},
            {3073, {58, 3,3,3,3,3,3,3,3}},
            {3074, {58, 3,3,3,3,3,3,3,3}},
            {3075, {58, 3,3,3,3,3,3,3,3}},

            // --- group 4 ---
            {3076, {58, 4,4,4,4,4,4,4,4}},
            {3077, {58, 4,4,4,4,4,4,4,4}},
            {3078, {58, 4,4,4,4,4,4,4,4}},
            {3079, {58, 4,4,4,4,4,4,4,4}},

            // --- group 5 ---
            {3081, {58, 5,5,5,5,5,5,5,5}},
            {3082, {58, 5,5,5,5,5,5,5,5}},
            {3083, {58, 5,5,5,5,5,5,5,5}},
            {3084, {58, 5,5,5,5,5,5,5,5}},

            // --- group 6 ---
            {3085, {58, 6,6,6,6,6,6,6,6}},
            {3086, {58, 6,6,6,6,6,6,6,6}},
            {3087, {58, 6,6,6,6,6,6,6,6}},
            {3088, {58, 6,6,6,6,6,6,6,6}},

            // --- group 7 ---
            {3089, {58, 7,7,7,7,7,7,7,7}},
            {3090, {58, 7,7,7,7,7,7,7,7}},
            {3091, {58, 7,7,7,7,7,7,7,7}},
            {3092, {58, 7,7,7,7,7,7,7,7}},

            // --- group 8 ---
            {3093, {58, 8,8,8,8,8,8,8,8}},
            {3094, {58, 8,8,8,8,8,8,8,8}},
            {3095, {58, 8,8,8,8,8,8,8,8}},
            {3096, {58, 8,8,8,8,8,8,8,8}},

            // --- group 9 ---
            {3098, {58, 9,9,9,9,9,9,9,9}},
            {3099, {58, 9,9,9,9,9,9,9,9}},
            {3100, {58, 9,9,9,9,9,9,9,9}},
            {3103, {58, 9,9,9,9,9,9,9,9}},
            {3104, {58, 9,9,9,9,9,9,9,9}},

            // --- group 10 ---
            {3105, {58,10,10,10,10,10,10,10,10}},
            {3106, {58,10,10,10,10,10,10,10,10}},
            {3107, {58,10,10,10,10,10,10,10,10}},
            {3108, {58,10,10,10,10,10,10,10,10}},

            // --- group 11 ---
            {3109, {58,11,11,11,11,11,11,11,11}},
            {3110, {58,11,11,11,11,11,11,11,11}},
            {3112, {58,11,11,11,11,11,11,11,11}},
            {3113, {58,11,11,11,11,11,11,11,11}},

            // --- group 12 ---
            {3114, {58,12,12,12,12,12,12,12,12}},
            {3115, {58,12,12,12,12,12,12,12,12}},
            {3116, {58,12,12,12,12,12,12,12,12}},
            {3117, {58,12,12,12,12,12,12,12,12}},

            // --- group 13 ---
            {3121, {58,13,13,13,13,13,13,13,13}},
            {3123, {58,13,13,13,13,13,13,13,13}},
            {3124, {58,13,13,13,13,13,13,13,13}},

            // --- group 14 ---
            {3125, {58,14,14,14,14,14,14,14,14}},
            {3126, {58,14,14,14,14,14,14,14,14}},
            {3127, {58,14,14,14,14,14,14,14,14}},
            {3128, {58,14,14,14,14,14,14,14,14}},

            // --- group 15 ---
            {3129, {58,15,15,15,15,15,15,15,15}},
            {3130, {58,15,15,15,15,15,15,15,15}},
            {3131, {58,15,15,15,15,15,15,15,15}},

            // --- group 16 ---
            {3132, {58,16,16,16,16,16,16,16,16}},
            {3133, {58,16,16,16,16,16,16,16,16}},
            {3134, {58,16,16,16,16,16,16,16,16}},
        };

        auto it = run_map.find(run_number);
        if (it != run_map.end()) {
            return it->second;
        }

        throw std::runtime_error("Run number not found");
    }

    // ____________________________________________________________________________________________
    Int_t get_kvc_segment(Int_t run_number) {
    static const std::map<Int_t, Int_t> segment_map = {

        // Segment 1 (0): setting 1-4
        {3054, 0}, {3056, 0}, {3058, 0}, {3060, 0}, {3062, 0},
        {3066, 0}, {3068, 0}, {3069, 0}, {3070, 0}, {3071, 0},
        {3072, 0}, {3073, 0}, {3074, 0}, {3075, 0},
        {3076, 0}, {3077, 0}, {3078, 0}, {3079, 0},

        // Segment 2 (1): setting 5-8
        {3081, 1}, {3082, 1}, {3083, 1}, {3084, 1},
        {3085, 1}, {3086, 1}, {3087, 1}, {3088, 1},
        {3089, 1}, {3090, 1}, {3091, 1}, {3092, 1},
        {3093, 1}, {3094, 1}, {3095, 1}, {3096, 1},

        // Segment 3 (2): setting 9-12
        {3098, 2}, {3099, 2}, {3100, 2}, {3103, 2}, {3104, 2},
        {3105, 2}, {3106, 2}, {3107, 2}, {3108, 2},
        {3109, 2}, {3110, 2}, {3112, 2}, {3113, 2},
        {3114, 2}, {3115, 2}, {3116, 2}, {3117, 2},

        // Segment 4 (3): setting 13-16
        {3121, 3}, {3123, 3}, {3124, 3},
        {3125, 3}, {3126, 3}, {3127, 3}, {3128, 3},
        {3129, 3}, {3130, 3}, {3131, 3},
        {3132, 3}, {3133, 3}, {3134, 3},
    };

    auto it = segment_map.find(run_number);
    if (it != segment_map.end()) {
        return it->second;
    } else {
        throw std::runtime_error("Run number not found in segment map");
    }
}


}